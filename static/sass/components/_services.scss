$support-grad-lg: 46%;
$support-grad-md: 42%;
$support-grad-sm: 32%;
$grad-start: $c-kala-blue;
$grad-end: #eee;

%support-bg {
  background: $c-kala-blue; /* Old browsers */
  @media (min-width: $screen-sm){
    background: -moz-linear-gradient(top,  $grad-start $support-grad-sm, $grad-end $support-grad-sm); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop($support-grad-sm,$grad-start), color-stop($support-grad-sm,#eee)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  $grad-start $support-grad-sm,$grad-end $support-grad-sm); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  $grad-start $support-grad-sm,$grad-end $support-grad-sm); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  $grad-start $support-grad-sm,$grad-end $support-grad-sm); /* IE10+ */
    background: linear-gradient(to bottom,  $grad-start $support-grad-sm,$grad-end $support-grad-sm); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='$grad-start', endColorstr='$grad-end',GradientType=0 ); /* IE6-9 */
  }
  @media (min-width: $screen-md){
    background: -moz-linear-gradient(top,  $grad-start $support-grad-md, $grad-end $support-grad-md); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop($support-grad-md,$grad-start), color-stop($support-grad-md,#eee)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  $grad-start $support-grad-md,$grad-end $support-grad-md); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  $grad-start $support-grad-md,$grad-end $support-grad-md); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  $grad-start $support-grad-md,$grad-end $support-grad-md); /* IE10+ */
    background: linear-gradient(to bottom,  $grad-start $support-grad-md,$grad-end $support-grad-md); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='$grad-start', endColorstr='$grad-end',GradientType=0 ); /* IE6-9 */
  }
  @media (min-width: $screen-lg){
    background: -moz-linear-gradient(top,  $grad-start $support-grad-lg, $grad-end $support-grad-lg); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop($support-grad-lg,$grad-start), color-stop($support-grad-lg,#eee)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  $grad-start $support-grad-lg,$grad-end $support-grad-lg); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  $grad-start $support-grad-lg,$grad-end $support-grad-lg); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  $grad-start $support-grad-lg,$grad-end $support-grad-lg); /* IE10+ */
    background: linear-gradient(to bottom,  $grad-start $support-grad-lg,$grad-end $support-grad-lg); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='$grad-start', endColorstr='$grad-end',GradientType=0 ); /* IE6-9 */
  }
}

#design {

  overflow: hidden;

  > .content-wrapper {
    padding-bottom: 14em;
  }

  .knob {
    display: block;
    &:hover {
      cursor: col-resize;
    }
  }

  @media screen and ( max-width: $screen-sm ) {
    .content-wrapper {
      position: relative;
    }
    .knob {
      display: none;
    }
    .mobile-controls {
      padding: .5em 1.5em 1.5em 1.5em!important;
      display: block;
    }

  }

}

.controls {

  .buttons {

    margin-top: 10px;
    margin-bottom: 10px;

    .less,
    .more {
      cursor: pointer;

      &:hover i {
        background-color: $c-widget-light-blue;
        color: $c-widget-dark-blue;
      }

      i {
        display: inline-block;
        width: 25px;
        height: 25px;
        padding: 5px;
        margin-right: 5px;
        border-radius: 50%;
        background-color: $c-widget-light-blue;
        text-align: center;
        color: $c-widget-dark-blue;
        position: relative;
      }

      span {
        color: $c-widget-dark-blue;
        font-size: $font-size-base - 2;
      }

      // Clicks on the button keep causing text (and icons because they are a
      // font) to be selected so we're trying to make it non-selectable. Seems
      // like a bit of a dodgy fix but it works.
      // http://stackoverflow.com/questions/826782/css-rule-to-disable-text-selection-highlighting
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;

    }

    .more {
      float: right;
      i {
        background-color: $c-widget-dark-blue;
        color: $c-widget-light-blue;
        margin-right: 0;
        margin-left: 5px;
      }
    }
  }

  p {
    border-top: 1px $c-services solid;
    background: $c-kala-yellow;
    padding: 1em .5em .5em .5em;
    box-shadow: 1px 1px 5px rgba( 0,0,0,.25);
  }
}

#design {
  .mobile-controls {
    @media screen and (max-width:$screen-sm) {
      padding-left: .375em;
      padding-right: .25em;
    }
  }
}


#development {
  .content {
    padding-left: 0;
    padding-right: 0;
    padding-top: 2em;
  }
}

#strategy {

  > .content-wrapper {
    padding-bottom: 3em;
  }

  .content {

    padding-left: 0;
    padding-right: 0;
    padding-top: 2em;

    h4 {
      margin-top: 2em;
    }

    .tags-block {
      h5 {
        float: left;
        margin-right: .5em;
      }
    }

    .tags {
      padding-top: .675em;
    }

  }

  @media screen and ( max-width: $screen-sm ) {
    position: relative;
  }

  .mobile-label {
    display: none;
  }

  .controls {
    @media screen and ( max-width: $screen-sm ) {
      overflow: hidden;
      background: $gray-lighter;
      padding-left: .375em;
      padding-right: .25em;
      box-shadow: -1px 1px 5px rgba(0,0,0,.25);
      position: absolute;
      right: 0;
      top: 3.75em;

      #strategy-slider {
        position: relative;
        margin-top: .5em;
        margin-bottom: .5em;
      }

      .mobile-label {
        display: block;
        font-size: .75em;
      }
      h4.mobile-label {
        font-size: 1.125em;
      }

      .noUi-target {
        width: 1em;
      }

      .noUi-vertical .noUi-handle {
        left: -.25em !important;
        width: 2em !important;
        height: 1em;
        transform: translateY(.75em);
      }

      .noUi-handle:after,
      .noUi-handle:before {
        width: 1em !important;
        left: .5em !important;
        top: 1.25em;
      }

      h3 {
        display: none;
        font-size: 1em;
        margin-top: .5em;
      }

      .noUi-target {
        margin-left: .5em;

        width: 1em !important;

      }

      .noUi-pips-vertical {
        margin-left: .5em;
      }
      .noUi-value, .noUi-value-vertical, .noUi-value-sub {
        padding-left: .5em;
      }
    }
  }

}

#strategy-slider {
  margin-top: 2em;
  margin-left: 2em;
  height: 260px;
}

#onpoint ul,
#offpoint>ul:first-of-type {
  @extend %features-list;
}

#pointless p {
  margin-top: 1em;
  font-size: 1.2em;
  line-height: 2em;
}

#development {
  .dev-point {
    @extend .col-sm-4;
    margin-bottom: 3em;
    text-align: center;
  }
}

#support {

  .plans {
    padding-top: 2em;
    padding-bottom: 2em;
    @extend %support-bg;
    .support-plan {
      position: relative;
    }
  }
  .content {
    padding-top: 2em;
    padding-bottom: 2em;
  }

  .support-plan {
    @extend .col-sm-4;
    .media {
      @extend .col-xs-6;
      @extend .col-sm-12;
      @extend .col-md-12;
      @media (max-width:$screen-xs) {
        width: 100%;
      }
      padding-left: 1em;
      padding-right: 1em;
      img {
        @extend %responsive-image;
        border-bottom: 1px darken($c-kala-blue,10) solid;
      }
    }
    .plan_content {
      padding-top: 1.5em;
      @extend .col-xs-6;
      @media (max-width:$screen-xs) {
        width: 100%;
      }
      @extend .col-sm-12;
      @extend .col-md-12;
      padding: 0;
      color: #fff;
      @media (min-width: $screen-sm ) {
        color: $text-color;
      }
    }
  }
  .support-plan {
    padding: 0 1em;
  }
  ul {
    list-style: none;
    padding-left: 0;
    border-top: 1px $c-services solid;
    li  {
      border-bottom: 1px lighten($c-kala-blue,20) solid;
      @media (min-width:$screen-sm) {
        border-bottom: 1px $c-services solid;
      }
      padding: .5em 0;
      line-height: 1.2;
    }
  }
}

#client-testimonials {
  h2 {
    margin-bottom: 1em;
  }
  
  blockquote {
    @extend %quote;
    padding: 0;
    margin-bottom: 3em;
    
    p {
      @extend .col-xs-12;
      @extend .col-sm-8;
      font-weight: 100;
      padding: 1em;
    }
    
    $testimonial-image-size: 200px;
    $testimonial-triangle-size: 20px;
    $testimonial-sm-image-size: $testimonial-image-size * 0.7;
    
    footer {
      @extend .col-xs-12;
      @extend .col-sm-4;
      padding-top: 2em;
      text-align: center;
      
      @media (min-width: $screen-sm) {
        padding-left: 0;
        padding-top: 0;
      }
      
      &:before {
        content: '';
        position: absolute;
        top: -11px;;
        left: 48%;
      	width: 0;
      	height: 0;
      	border-top: $testimonial-triangle-size solid $c-kala-yellow;
      	border-left: ($testimonial-triangle-size / 2) solid transparent;
      	border-right: ($testimonial-triangle-size / 2) solid transparent;
      
        @media (min-width: $screen-sm) {
          left: 0;
          top: ($testimonial-image-size / 2) - ($testimonial-triangle-size / 2);
        	border-top: ($testimonial-triangle-size / 2) solid transparent;
        	border-bottom: ($testimonial-triangle-size / 2) solid transparent;
        	border-left: $testimonial-triangle-size solid $c-kala-yellow;
        	border-right: none;
        }
        
        @media (min-width: $screen-sm) and (max-width: $screen-md) {
          top: ($testimonial-sm-image-size / 2) - ($testimonial-triangle-size / 2);
        }
      }
      
      cite {
        margin: 0;
      }
      
      img {
        border-radius: 50%;
        margin-bottom: 1em;

        @media (min-width: $screen-sm) and (max-width: $screen-md) {
          width: $testimonial-sm-image-size;
        }
      }
      
      .img-wrap {
        width: $testimonial-image-size;
        margin: auto;

        @media (min-width: $screen-sm) and (max-width: $screen-md) {
          width: $testimonial-sm-image-size;
        }
      }
    }
    
    &:nth-child(odd) {
      @media (min-width: $screen-sm) {
        p {
          @extend .col-sm-offset-4;
        }

        footer {
          margin-left: -100%;
          padding-left: 3em;

          &:before {
            right: 0;
            left: auto;
          	border-left: none;
          	border-right: $testimonial-triangle-size solid $c-kala-yellow;
          }
        }
      }
    }
  }
}


